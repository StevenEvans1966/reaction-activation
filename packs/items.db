{"name":"Absorb Elements","type":"spell","img":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","effects":[{"label":"Absorb Elements Reaction Filter","icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","origin":"Actor.0iTls3GFMkwYpoWX.Item.loePBQyN9ekqgV5a","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"Yb8JK5DRhNOjYvkf","changes":[{"key":"flags.midi-qol.reactionFilter","mode":0,"value":"{\"damageTypes\":[\"acid\", \"cold\", \"fire\", \"lightning\", \"thunder\"]}","priority":20}],"tint":null,"transfer":true,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dfreds-convenient-effects":{"description":""}}},{"_id":"1FZSW8SGDJQszAVq","flags":{"dae":{"stackable":"none","macroRepeat":"none","transfer":false,"specialDuration":["DamageDealt"],"selfTarget":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"},"core":{"statusId":"","sourceId":"Item.fs45iEi4VlhWV4Bp.ActiveEffect.iJ9E4fnIwXjfi1TP"},"dnd5e-helpers":{"rest-effect":"Ignore"},"times-up":{"isPassive":false}},"changes":[{"key":"system.bonuses.msak.damage","mode":0,"value":"0","priority":20},{"key":"system.bonuses.mwak.damage","mode":0,"value":"0","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":2,"startTurn":1,"seconds":null,"combat":null,"turns":null,"startRound":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements","tint":null,"transfer":false,"origin":"Item.qhipTj0RNhpTwEf3"},{"_id":"jJrt3P92lDaipoiS","changes":[{"key":"system.traits.dr.value","mode":2,"value":"fire","priority":20}],"disabled":false,"duration":{"rounds":2,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements Resistance","origin":"Item.qhipTj0RNhpTwEf3","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEnd"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":"","sourceId":"Item.fs45iEi4VlhWV4Bp.ActiveEffect.8r9eWcqP6QyIbPWU"},"times-up":{"isPassive":false}},"tint":null}],"flags":{"dynamiceffects":{"equipActive":[true,true,true],"alwaysActive":[true,true,true]},"mess":{"templateTexture":""},"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"waterdeep-dungeon-of-the-mad-mage","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.4"},"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"itemacro":{"macro":{"data":{"_id":null,"name":"Absorb Elements","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"let tactor;\nlet itemname = \"Absorb Elements\";\nif (args[0].tokenUuid) tactor = (await fromUuid(args[0].tokenUuid)).actor;\nelse tactor = game.actors.get(args[0].actorId);\n\nlet dialog = new Promise((resolve, reject) => {\nnew Dialog({\ntitle:'Choose a damage type',\ncontent:`\n  <form class=\"flexcol\">\n<div class=\"form-group\">\n  <select id=\"element\">\n<option value=\"acid\">Acid</option>\n<option value=\"cold\">Cold</option>\n<option value=\"fire\">Fire</option>\n<option value=\"lightning\">Lightning</option>\n<option value=\"thunder\">Thunder</option>\n  </select>\n</div>\n  </form>\n`,\n//select element type\nbuttons:{\nyes:{\nicon:'<i class=\"fas fa-bolt\"></i>',\nlabel:'Select',\ncallback:async (html) => {\nlet element = html.find('#element').val();\nlet effect =  tactor.effects.find(i => i.data.label === itemname);\nlet changes = duplicate(effect.data.changes);\nchanges[0].value = `${args[0].spellLevel}d6[${element}]`;\nchanges[1].value = `${args[0].spellLevel}d6[${element}]`;\nawait effect.update({changes});\neffect =  tactor.effects.find(i => i.data.label === `${itemname} Resistance`);\nchanges = duplicate(effect.data.changes);\nchanges[0].value = element;\nawait effect.update({changes});\nresolve();\n},\n},\n}\n}).render(true);\n})\nawait dialog;","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Absorb Elements","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null},"author":"OOTaP8MEW43RjlP3","_id":null,"folder":null}},"midi-qol":{"onUseMacroName":"[postActiveEffects]function.stevenPremades.macros.absorbElements","effectActivation":false,"reactionActivationData":{"hookId":341,"trigeringDamageTypes":["acid","cold","fire","lightning","thunder"]}},"core":{"sourceId":"Item.jwe2NqmH3YX6SMVx"},"favtab":{"isFavorite":false},"cf":{"id":"temp_pjad4yqna4p","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":true,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"autoSaveFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"ddbimporter":{"pack":"forge-vtt-shared-compendiums-ddb-import.item-overrides","id":137857,"definitionId":2368,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Druid","level":1,"characterClassId":123665617,"spellLevel":1,"ability":"wis","mod":4,"dc":14,"cantripBoost":false,"overrideDC":false,"id":137857,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Absorb Elements","sources":[{"sourceId":4,"pageNumber":150,"sourceType":1}],"tags":["Damage","Warding"],"version":"3.4.15","effectsApplied":true,"importId":"QaeEz4h1G727KXrO","originalItemName":"Absorb Elements","replaced":true}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra [[/r 1d6]] damage of the triggering type, and the spell ends.</p><div class=\"rd__spc-inline-post\"><p></p></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><p><span class=\"entry-title-inner\">At Higher Levels.</span></p><p>When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by [[/r 1d6]] for each slot level above 1st.</p></div></div>","chat":"","unidentified":""},"source":"XGE, SRE 1.0.4","activation":{"type":"reactiondamage","cost":1,"condition":"which you take when you take acid, cold, fire, lightning, or thunder damage"},"duration":{"value":"1","units":"round"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1661995926181,"modifiedTime":1681996180628,"lastModifiedBy":"OOTaP8MEW43RjlP3"},"_id":"edc5wjfbRJdU6WV1","folder":null,"sort":0,"ownership":{"default":0,"OOTaP8MEW43RjlP3":3}}
{"name":"Favored Foe","type":"feat","system":{"description":{"value":"<p>When you hit a creature with an attack roll, you can mark the target as your favored enemy for 1 minute or until you lose your concentration (as if you were concentrating on a spell). The first time on each of your turns that you hit the favored enemy and deal damage to it, including when you mark it, you can increase that damage by [[/roll @scale.ranger.favored-foe]].</p>","chat":"","unidentified":""},"source":"sre 1.0.4 (post apply)","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":1,"max":"2","per":"lr","recovery":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"class","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"2438252","entityTypeId":"222216831","action":true,"componentId":3035739,"componentTypeId":12168134,"originalName":"Favored Foe","type":"class","class":"Ranger","effectsApplied":true,"importId":"2w3Kg2SS1zxk5MIc"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Ranger"}},"link-item-resource-5e":{"resource-link":"primary"},"itemacro":{"macro":{"data":{"name":"Favored Foe","type":"script","scope":"global","command":"if (args[0].tag === \"OnUse\") {\n  const lastArg = args[args.length - 1];\n  const item = await fromUuid(lastArg.itemUuid);\n  MidiQOL.addConcentration(lastArg.actor, {item: item, targets: lastArg.targets});\n\n} else {\n  if (args[0].actor.flags?.dae?.onUpdateTarget && args[0].hitTargets.length > 0) {\n    const isMarked = args[0].actor.flags.dae.onUpdateTarget.find(flag =>\n      flag.flagName === \"Favored Foe\" && flag.sourceTokenUuid === args[0].hitTargetUuids[0]\n    );\n\n    if (isMarked) {\n      const targetUuid = args[0].hitTargets[0].uuid;\n      if (targetUuid == getProperty(args[0].actor.flags, \"midi-qol.favoredFoeHit\")) {\n        console.debug(\"Favored Foe used this turn\");\n        return {};\n      }\n\n      const favoredFoeHitData = {\n        changes: [\n          {\n            key: \"flags.midi-qol.favoredFoeHit\",\n            mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE,\n            value: targetUuid,\n            priority: 20\n          }\n        ],\n        origin: args[0].actorUuid,\n        disabled: false,\n        icon: args[0].item.img,\n        label: \"Favored Foe Hit\",\n      };\n      setProperty(favoredFoeHitData, \"flags.dae.specialDuration\", [\"turnStartSource\"]);\n      await args[0].actor.createEmbeddedDocuments(\"ActiveEffect\", [favoredFoeHitData]);\n\n      const damageType = args[0].item.system.damage.parts[0][1];\n      const diceMult = args[0].isCritical ? 2 : 1;\n      return { damageRoll: `${diceMult}d${args[0].actor.classes.ranger.scaleValues[\"favored-foe\"].faces }[${damageType}]`, flavor: \"Favored Foe\" };\n    }\n  }\n\n  return {};\n}\n"},"options":{},"apps":{},"compendium":null,"name":"Favored Foe","type":"script","scope":"global","command":"","author":"OOTaP8MEW43RjlP3","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"onUseMacroName":"[postActiveEffects]function.stevenPremades.macros.favoredFoeOnUse,[preItemRoll]function.stevenPremades.macros.favoredFoePreItemRoll","forceCEOff":true,"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.jeFKwVs1EUb3Jjn7.Item.0luxgx4oBKSMHGGQ"}},"effects":[{"label":"Marked by Favored Foe","changes":[{"key":"flags.dae.onUpdateSource","mode":0,"value":"Favored Foe","priority":20}],"duration":{"seconds":60,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"tint":null,"transfer":false,"disabled":false,"flags":{"dae":{"transfer":false,"stackable":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":"","macroRepeat":"none","specialDuration":[]},"ddbimporter":{"disabled":false},"midi-qol":{"forceCEOff":true},"dfreds-convenient-effects":{"description":""},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"icon":"icons/magic/perception/eye-ringed-glow-angry-large-red.webp","_id":"hknyZAPrpPfgpb7j","origin":null},{"label":"Favored Foe","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"function.stevenPremades.macros.favoredFoeDamageBonus","priority":20}],"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"tint":null,"transfer":true,"disabled":false,"flags":{"dae":{"transfer":true,"stackable":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":"","macroRepeat":"none","specialDuration":[]},"ddbimporter":{"disabled":false},"midi-qol":{"forceCEOff":true},"dfreds-convenient-effects":{"description":""},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"icon":"icons/magic/perception/eye-ringed-glow-angry-large-red.webp","_id":"STZoXb89dZJLxxUT","origin":null}],"img":"icons/magic/perception/eye-ringed-glow-angry-large-red.webp","_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1681460326833,"modifiedTime":1681996180630,"lastModifiedBy":"OOTaP8MEW43RjlP3"},"_id":"Ac0ovdW7A4iU6s6j","folder":null,"sort":0,"ownership":{"default":0,"OOTaP8MEW43RjlP3":3}}
