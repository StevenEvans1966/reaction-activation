{"name":"Absorb Elements","type":"spell","img":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","effects":[{"label":"Absorb Elements Reaction","icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","origin":"Actor.0iTls3GFMkwYpoWX.Item.loePBQyN9ekqgV5a","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"Yb8JK5DRhNOjYvkf","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":20},{"key":"flags.midi-qol.reactionHooks","mode":0,"value":"{\"damageTypes\":[\"acid\", \"cold\", \"fire\", \"lightning\", \"thunder\"]}","priority":20}],"tint":null,"transfer":true,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}},{"_id":"1FZSW8SGDJQszAVq","flags":{"dae":{"stackable":"none","macroRepeat":"none","transfer":false,"specialDuration":["DamageDealt"],"selfTarget":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"},"core":{"statusId":"","sourceId":"Item.fs45iEi4VlhWV4Bp.ActiveEffect.iJ9E4fnIwXjfi1TP"},"dnd5e-helpers":{"rest-effect":"Ignore"},"times-up":{"isPassive":false}},"changes":[{"key":"system.bonuses.msak.damage","mode":0,"value":"0","priority":20},{"key":"system.bonuses.mwak.damage","mode":0,"value":"0","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":2,"startTurn":1,"seconds":null,"combat":null,"turns":null,"startRound":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements","tint":null,"transfer":false,"origin":"Item.qhipTj0RNhpTwEf3"},{"_id":"jJrt3P92lDaipoiS","changes":[{"key":"system.traits.dr.value","mode":2,"value":"fire","priority":20}],"disabled":false,"duration":{"rounds":2,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements Resistance","origin":"Item.qhipTj0RNhpTwEf3","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEnd"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":"","sourceId":"Item.fs45iEi4VlhWV4Bp.ActiveEffect.8r9eWcqP6QyIbPWU"},"times-up":{"isPassive":false}},"tint":null}],"flags":{"dynamiceffects":{"equipActive":[true,true,true],"alwaysActive":[true,true,true]},"mess":{"templateTexture":""},"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"waterdeep-dungeon-of-the-mad-mage","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.4"},"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"itemacro":{"macro":{"data":{"_id":null,"name":"Absorb Elements","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"let tactor;\nlet itemname = \"Absorb Elements\";\nif (args[0].tokenUuid) tactor = (await fromUuid(args[0].tokenUuid)).actor;\nelse tactor = game.actors.get(args[0].actorId);\n\nlet dialog = new Promise((resolve, reject) => {\nnew Dialog({\ntitle:'Choose a damage type',\ncontent:`\n  <form class=\"flexcol\">\n<div class=\"form-group\">\n  <select id=\"element\">\n<option value=\"acid\">Acid</option>\n<option value=\"cold\">Cold</option>\n<option value=\"fire\">Fire</option>\n<option value=\"lightning\">Lightning</option>\n<option value=\"thunder\">Thunder</option>\n  </select>\n</div>\n  </form>\n`,\n//select element type\nbuttons:{\nyes:{\nicon:'<i class=\"fas fa-bolt\"></i>',\nlabel:'Select',\ncallback:async (html) => {\nlet element = html.find('#element').val();\nlet effect =  tactor.effects.find(i => i.data.label === itemname);\nlet changes = duplicate(effect.data.changes);\nchanges[0].value = `${args[0].spellLevel}d6[${element}]`;\nchanges[1].value = `${args[0].spellLevel}d6[${element}]`;\nawait effect.update({changes});\neffect =  tactor.effects.find(i => i.data.label === `${itemname} Resistance`);\nchanges = duplicate(effect.data.changes);\nchanges[0].value = element;\nawait effect.update({changes});\nresolve();\n},\n},\n}\n}).render(true);\n})\nawait dialog;","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Absorb Elements","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"1.0.0.0\";\n\nconsole.log(\"Absorb Elements:\", args)\nconst lastArg = args[args.length - 1];\ntry {\nif (args[0] === \"off\") {\nawait ReactionActivation.removeReactionActivation(lastArg.origin)\nreturn;\n}\n} catch (err) {\nconsole.error(`Absorb Elements Off ${version}`, err);\n}\n\ntry {\nif (args[0].tag === \"OnUse\" && args[0].macroPass === \"postActiveEffects\") {\nlet tactor = (args[0].tokenUuid) ? (await fromUuid(args[0].tokenUuid)).actor :game.actors.get(args[0].actorId);\nlet item = args[0].item\n\nlet dialogRtn = await ReactionActivation.getDamageTypeForReaction(args[0].workflowOptions, item)\n\nconst chatMessage = game.messages.get(args[0].itemCardId);\nvar content = duplicate(chatMessage.content);\ncontent = content.substring(0, content.length - 6)\ncontent += `<div class=\"card-header flexrow\">\n<span>Absorbed ${dialogRtn.nameAndIcon.name} <span>\n<img src=\"${dialogRtn.nameAndIcon.img}\" width=\"15\" height=\"15\" style=\"border:0px;vertical-align:bottom;\"/>\n</div></div>`\nconsole.log(chatMessage.content)\nchatMessage.update({ content:content })\n\nconst itemName = item.name;\nconst damageType = dialogRtn.damageType\nlet effect = tactor.effects.find(i => i.label === itemName);\nlet changes = duplicate(effect.changes);\nchanges[0].value = `${args[0].spellLevel}d6[${damageType}]`;\nchanges[1].value = `${args[0].spellLevel}d6[${damageType}]`;\nawait effect.update({ changes });\neffect = tactor.effects.find(i => i.label === `${itemName} Resistance`);\nchanges = duplicate(effect.changes);\nchanges[0].value = damageType;\nawait effect.update({ changes });\n}\n} catch (err) {\nconsole.error(`Absorb Elements OnUse ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null},"author":"OOTaP8MEW43RjlP3","_id":null,"folder":null}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"reactionActivationData":{"hookId":341,"trigeringDamageTypes":["acid","cold","fire","lightning","thunder"]}},"core":{"sourceId":"Item.jwe2NqmH3YX6SMVx"},"favtab":{"isFavorite":false},"cf":{"id":"temp_pjad4yqna4p","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"autoSaveFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra [[/r 1d6]] damage of the triggering type, and the spell ends.</p><div class=\"rd__spc-inline-post\"><p></p></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><p><span class=\"entry-title-inner\">At Higher Levels.</span></p><p>When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by [[/r 1d6]] for each slot level above 1st.</p></div><div class=\"rd__spc-inline-post\"><section id=\"secret-lvvhe3vBiFJKkHhs\" class=\"secret\"><p>DR:1.0.0.0</p></section></div></div>","chat":"","unidentified":""},"source":"XGE, DR 1.0.0.0","activation":{"type":"reactiondamage","cost":1,"condition":"which you take when you take acid, cold, fire, lightning, or thunder damage"},"duration":{"value":"1","units":"round"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1661995926181,"modifiedTime":1677156315396,"lastModifiedBy":"OOTaP8MEW43RjlP3"},"folder":null,"sort":0,"ownership":{"default":0,"OOTaP8MEW43RjlP3":3},"_id":"BbaXDFMGp7LhqW7d"}
{"name":"Wrath of the Storm","type":"feat","system":{"description":{"value":"<p>When a creature within 5 ft. that you can see hits you with an attack, you can use your reaction to cause the creature to make a DEX saving throw (DC [[ max(8 + @abilities.wis.mod + @prof)]] or it takes 2d8 lightning or thunder damage (your choice), half damage on success).</p><section id=\"secret-gldu5bgPBLsIeHsj\" class=\"secret\"><p>DR:2.0.0.0</p></section><details><summary>More Details</summary><p></p><p>Also at 1st level, you can thunderously rebuke attackers. When a creature within 5 feet of you that you can see hits you with an attack, you can use your reaction to cause the creature to make a Dexterity saving throw. The creature takes 2d8 lightning or thunder damage (your choice) on a failed saving throw, and half as much damage on a successful one.</p><p>You can use this feature a number of times equal to your Wisdom modifier (a minimum of once). You regain all expended uses when you finish a long rest.</p><p></p></details>","chat":"","unidentified":""},"source":"DR","activation":{"type":"reactiondamage","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":4,"max":"4","per":"lr","recovery":""},"consume":{"type":"attribute","target":"resources.primary.value","amount":1},"ability":"","actionType":"save","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d8",""]],"versatile":""},"formula":"","save":{"ability":"dex","dc":null,"scaling":"spell"},"type":{"value":"class","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"1018","entityTypeId":"222216831","componentId":149,"componentTypeId":12168134,"type":"class","class":"Cleric","subclass":"Tempest Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"JaY3UJ0SaHufxacB","pack":"forge-vtt-shared-compendiums-ddb-import.item-overrides","originalItemName":"Wrath of the Storm","replaced":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"link-item-resource-5e":{"resource-link":"primary"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postDamageRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges:it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Wrath of the Storm","type":"script","scope":"global","command":"const lastArg = args[args.length - 1];\n\nif (lastArg.macroPass === \"postDamageRoll\") {\nconst dialogRtn = await ReactionActivation.showSelectDamageButtonsDialog([\"thunder\", \"lightning\"], \"thunder\");\nconst damageType = dialogRtn.damageType\n\nif (!damageType) return;\n\nconst workflow = lastArg.workflow;\nconst newDamageRoll = workflow.damageRoll;\nnewDamageRoll._formula += '[' + damageType + ']';\nworkflow.defaultDamageType = damageType;\nawait workflow.setDamageRoll(newDamageRoll);\n}","author":"OOTaP8MEW43RjlP3","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.9tCQ0s3OHj1WktxW.Item.4CCq1y1ouDvv4X5G"},"cf":{"id":"temp_958hys7q7"}},"effects":[],"img":"icons/magic/lightning/bolts-forked-large-orange.webp","_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1676320351368,"modifiedTime":1677156317824,"lastModifiedBy":"OOTaP8MEW43RjlP3"},"folder":null,"sort":0,"ownership":{"default":0,"OOTaP8MEW43RjlP3":3},"_id":"6dPGdElvKWThqWNR"}